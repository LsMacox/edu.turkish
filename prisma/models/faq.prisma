// Prisma Schema - FAQ Domain
// FAQ items and categories with translations

model Faq {
  id           Int      @id @default(autoincrement())
  categoryId   Int?
  featured     Boolean  @default(false)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  // Relations
  translations FaqTranslation[]
  category     FaqCategory? @relation(fields: [categoryId], references: [id], onDelete: SetNull)

  @@map("faqs")
}

model FaqTranslation {
  id           Int      @id @default(autoincrement())
  faqId        Int      @map("faq_id")
  locale       String   @db.VarChar(5)
  question     String?  @db.VarChar(500)
  answer       String?  @db.Text
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  // Relations
  faq          Faq  @relation(fields: [faqId], references: [id], onDelete: Cascade)

  @@unique([faqId, locale])
  @@map("faq_translations")
}

model FaqCategory {
  id          Int                 @id @default(autoincrement())
  createdAt   DateTime            @default(now()) @map("created_at")
  updatedAt   DateTime            @updatedAt @map("updated_at")

  // Relations
  translations FaqCategoryTranslation[]
  items        Faq[]

  @@map("faq_categories")
}

model FaqCategoryTranslation {
  id          Int          @id @default(autoincrement())
  categoryId  Int          @map("category_id")
  locale      String       @db.VarChar(5)
  name        String       @db.VarChar(100)
  createdAt   DateTime     @default(now()) @map("created_at")
  updatedAt   DateTime     @updatedAt @map("updated_at")

  // Relations
  category    FaqCategory  @relation(fields: [categoryId], references: [id], onDelete: Cascade)

  @@unique([categoryId, locale])
  @@index([locale, name], map: "idx_faq_category_locale_name")
  @@map("faq_category_translations")
}
