# Конфигурация Directus

Папка содержит снапшоты схемы и вспомогательные файлы для Directus. Используйте её, чтобы переносить настройки коллекций, ролей и дашбордов между окружениями.

## Быстрый старт

- Запуск Directus: `docker compose up -d directus`
- Проверка состояния: `curl -sSf http://localhost:8055/server/health`

## Работа со снапшотом схемы

1. Настройте коллекции, поля и права в локальном окружении Directus.
2. Сохраните схему в `contrib/directus/schema.yaml`:
   ```bash
   npm run directus:schema:snapshot
   ```
3. Закоммитьте обновлённый файл в репозиторий.
4. Чтобы применить схему на другом окружении:
   ```bash
   npm run directus:schema:apply
   ```

Обе команды используют переменные окружения:

- `DIRECTUS_PUBLIC_URL` — базовый URL Directus (по умолчанию `http://localhost:8055`)
- `DIRECTUS_ADMIN_EMAIL`, `DIRECTUS_ADMIN_PASSWORD` — учётные данные администратора

Дополнительно, фронтенд читает `NUXT_PUBLIC_DIRECTUS_URL`. Добавьте его в `.env`, чтобы Nuxt и Directus указывали на один и тот же хост.

## Советы

- Перед применением схемы на проде сделайте резервную копию БД.
- Если требуются кастомные роли или токены, фиксируйте их отдельно — снапшот описывает только схему и системные настройки.
- Храните загрузки Directus в томе `directus_uploads`, чтобы при пересборке контейнера не потерять файлы.
