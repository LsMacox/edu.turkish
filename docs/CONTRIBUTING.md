# Contributing

Спасибо за интерес к проекту! Ниже собраны правила и подсказки, которые помогают нам поддерживать единый стиль и быстро проводить ревью.

## Подготовка окружения

```bash
git clone <repo>
cd edu.turkish
npm install
cp .env.example .env
```

- Для локального запуска поменяйте `DATABASE_URL` в `.env` на `mysql://app_user:<pass>@127.0.0.1:3306/edu_turkish` (или используйте свои креды).
- Запустите инфраструктуру: `docker compose up -d mysql redis` (Directus/EspoCRM поднимайте по необходимости).
- Примените схему и сиды:
  ```bash
  npx prisma db push
  npx tsx prisma/seed/seed.ts
  ```
- Запускайте Nuxt через `npm run dev`.

Если предпочитаете работать целиком в Docker, поднимите `docker compose up -d app mysql redis` и используйте скрипты `npm run db:*`, которые выполняются внутри контейнера `app`.

## Рабочий процесс

1. Создайте ветку от `main`
2. Делайте небольшие осмысленные коммиты
3. Обновляйте документацию и переводы вместе с кодом
4. Перед PR убедитесь, что проект собирается и тесты проходят

## Перед отправкой PR

```bash
npm run lint
npm run format:check
npm run test
```

- Если меняете UI, приложите скриншоты или короткое описание поведения
- В описании PR укажите мотивацию и список изменений

## Стиль кода

- TypeScript: типизируйте публичные API, избегайте `any`
- Vue/Nuxt: придерживайтесь `<script setup>` и композиционных хуков
- Следуйте форматированию Prettier (`npm run format`)
- Избегайте лишних комментариев; вместо них пишите выразительный код и тесты

## Тесты

- Пишите unit/компонентные тесты для ключевой логики и регрессий
- Используйте Vitest + Testing Library (`npm run test`)
- При необходимости добавляйте фикстуры в `tests/`

## Локализация

- Новые ключи добавляйте во все локали (`ru`, `en`, `kk`, `tr`)
- Используйте плейсхолдеры (`{count}`) вместо захардкоженных чисел
- Проверяйте качество переводов через `npm run i18n:check`
- Подробности — в [docs/I18N.md](./I18N.md)

## Безопасность и данные

- Не коммитьте секреты и реальные персональные данные
- Проверяйте настройки CORS, middleware и доступ к API
- При работе с импортом/удалением данных используйте режимы `--dry-run`

## Обсуждения

- Вопросы отправляйте в Issues c минимальным примером
- Предложения больших изменений оформляйте как Draft PR или обсуждение в Issue
- Для оперативной связи используйте корпоративные каналы команды
