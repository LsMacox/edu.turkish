# I18n и переводы

Проект использует `@nuxtjs/i18n` с файловой структурой `i18n/locales/{locale}/**/*.json`. Каждая локаль хранится в отдельных JSON-файлах, сгруппированных по страницам, компонентам и общим словарям.

## Языки

- `ru`
- `en`
- `kk`
- `tr`

Список локалей и их файлы подключаются в `nuxt.config.ts` (`i18n.locales`).

## Организация ключей

- **Страницы**: `i18n/locales/{locale}/pages/*.json`
- **Компоненты**: `i18n/locales/{locale}/components/*.json`
- **Общие словари**: `common.json`, `nav.json`, `errors.json`

Рекомендуем придерживаться структуры вида `section.block.field`. Например, для страницы блога используйте:

```json
{
  "meta": { "title": "…" },
  "hero": {
    "title": "…",
    "stats": [{ "label": "{count} helpful articles" }]
  }
}
```

## Плейсхолдеры и форматирование

- Используйте `{count}`, `{value}` и другие плейсхолдеры вместо захардкоженных чисел или строк.
- Подставляйте значения через `t('key', { count })` или аналогичные вызовы.
- Избегайте HTML в переводах. Если нужен форматированный текст, используйте компоненты или `v-html` только для доверенного контента.

## Практика разработки

1. Добавляйте ключи сначала в `ru`, затем копируйте структуру в остальные локали.
2. Если перевод ещё не готов, используйте временный текст или пометку `TODO`, но не оставляйте ключ пустым.
3. Поддерживайте одинаковое расположение ключей во всех файлах — так проще сравнивать diff.
4. Массовые правки выполняйте через `npm run translate` (см. [docs/scripts/TRANSLATE.md](./scripts/TRANSLATE.md)).

## Проверка качества

- Запускайте `npm run i18n:check`, чтобы найти дубликаты, пропущенные ключи и пустые структуры (документация — [docs/scripts/I18N_CHECK.md](./scripts/I18N_CHECK.md)).
- Линтер не проверяет переводы автоматически, поэтому скрипт — главный инструмент контроля.

## Отладка в коде

- `te('key')` — проверяет наличие ключа.
- `tm('path')` — возвращает вложенный объект и полезен для списков/массивов.
- В dev-режиме включите вывод отсутствующих ключей: `i18n: { missingWarn: true }` в `nuxt.config.ts`.

## Советы

- Следите за числовыми соглашениями: `count` должен соответствовать реальному числу (прежде чем отображать статистику, проверяйте данные).
- При работе с JSON-массивами (например, списки преимуществ) старайтесь сохранять одинаковый порядок элементов в разных локалях.
- Если ключ больше не используется, удалите его из всех локалей и запустите `npm run i18n:check -- --remove-unused` в режиме предварительного просмотра.
