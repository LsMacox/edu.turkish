# Удаление университета (`scripts/delete-university.ts`)

CLI-скрипт удаляет университет и все связанные сущности по слагу. Под капотом используется Prisma и каскадные связи из схемы.

## Запуск

```bash
npx tsx scripts/delete-university.ts --slug=kent-university --dry-run
npx tsx scripts/delete-university.ts --slug=kent-university --yes
```

Доступные флаги:

- `--slug=<value>` — обязательный параметр. Принимает базовый или локализованный слаг.
- `--locale=<locale>` — уточняет локаль слага, если одно значение встречается у нескольких университетов.
- `--dry-run` — выводит статистику, но не удаляет данные.
- `--yes`, `-y` — подтверждает удаление без дополнительных вопросов (нужно для CI/скриптов).

## Что удаляется

- Основная запись `University`
- Переводы `UniversityTranslation`
- Программы, инфраструктура кампуса, требования, документы, даты, стипендии и их переводы
- Медиа-галерея и связанные переводы
- Связи с направлениями (`UniversityStudyDirection`)
- Отзывы и их переводы (удаляются явно, потому что связь настроена с `SetNull`)

Большинство связей в Prisma настроено с `onDelete: Cascade`, поэтому после удаления университета каскадно очищается большая часть связанных таблиц.

## Рекомендации

1. Всегда начинайте с `--dry-run`, чтобы проверить количество затрагиваемых записей.
2. Перед финальным запуском сделайте бэкап или убедитесь, что изменения легко откатить.
3. При работе в неинтерактивной среде используйте `--yes`.
4. После удаления желательно выполнить `npm run i18n:check`, чтобы убедиться в отсутствии осиротевших ключей.
